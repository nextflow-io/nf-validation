
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Examples of advanced sample sheet creation techniques.">
      
      
      
        <link rel="canonical" href="https://nextflow-io.github.io/nf-validation/latest/samplesheets/examples/">
      
      
        <link rel="prev" href="../fromSamplesheet/">
      
      
        <link rel="next" href="../../contributing/setup/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.31">
    
    
      
        <title>Channel usage examples - nf-validation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.3cba04c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Channel usage examples - nf-validation" >
      
        <meta  property="og:description"  content="Examples of advanced sample sheet creation techniques." >
      
        <meta  property="og:image"  content="https://nextflow-io.github.io/nf-validation/latest/assets/images/social/samplesheets/examples.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="https://nextflow-io.github.io/nf-validation/latest/samplesheets/examples/" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Channel usage examples - nf-validation" >
      
        <meta  name="twitter:description"  content="Examples of advanced sample sheet creation techniques." >
      
        <meta  name="twitter:image"  content="https://nextflow-io.github.io/nf-validation/latest/assets/images/social/samplesheets/examples.png" >
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#sample-sheet-channel-manipulation-examples" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  <div style="text-align: center;">
    <strong>nf-validation has been deprecated.</strong>
    Please use <a href="https://nextflow-io.github.io/nf-schema/latest/">nf-schema</a> instead.
  </div>

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="nf-validation" class="md-header__button md-logo" aria-label="nf-validation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            nf-validation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Channel usage examples
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/nextflow-io/nf-validation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    nextflow-io/nf-validation
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="nf-validation" class="md-nav__button md-logo" aria-label="nf-validation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.5 1.75v11.5c0 .138.112.25.25.25h3.17a.75.75 0 0 1 0 1.5H2.75A1.75 1.75 0 0 1 1 13.25V1.75C1 .784 1.784 0 2.75 0h8.5C12.216 0 13 .784 13 1.75v7.736a.75.75 0 0 1-1.5 0V1.75a.25.25 0 0 0-.25-.25h-8.5a.25.25 0 0 0-.25.25Zm13.274 9.537v-.001l-4.557 4.45a.75.75 0 0 1-1.055-.008l-1.943-1.95a.75.75 0 0 1 1.062-1.058l1.419 1.425 4.026-3.932a.75.75 0 1 1 1.048 1.074ZM4.75 4h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM4 7.75A.75.75 0 0 1 4.75 7h2a.75.75 0 0 1 0 1.5h-2A.75.75 0 0 1 4 7.75Z"/></svg>

    </a>
    nf-validation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/nextflow-io/nf-validation" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    nextflow-io/nf-validation
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Home
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    nf-validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../background/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Background
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Schema
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Schema
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/create_schema/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Creating a Nextflow schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/nextflow_schema_specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nextflow schema specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/sample_sheet_schema_specification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sample sheet schema specification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/nextflow_schema_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example Nextflow schema
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../nextflow_schema/sample_sheet_schema_examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example sample sheet schema
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Parameters
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Parameters
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parameters/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parameters/help_text/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Help text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../parameters/summary_log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary log
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Sample sheets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Sample sheets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validate_sample_sheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate a sample sheet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fromSamplesheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Create a channel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Channel usage examples
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Channel usage examples
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    <span class="md-ellipsis">
      Glossary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Default mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-samplesheet-with-no-headers" class="md-nav__link">
    <span class="md-ellipsis">
      Using a samplesheet with no headers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-structure-of-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the structure of channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-elements-in-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Removing elements in channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#separating-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Separating channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#separate-items-based-on-a-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Separate items based on a condition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combining-a-channel" class="md-nav__link">
    <span class="md-ellipsis">
      Combining a channel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#count-items-with-a-common-value" class="md-nav__link">
    <span class="md-ellipsis">
      Count items with a common value
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Contributing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contribution instructions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#glossary" class="md-nav__link">
    <span class="md-ellipsis">
      Glossary
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#default-mode" class="md-nav__link">
    <span class="md-ellipsis">
      Default mode
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-a-samplesheet-with-no-headers" class="md-nav__link">
    <span class="md-ellipsis">
      Using a samplesheet with no headers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#changing-the-structure-of-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Changing the structure of channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#removing-elements-in-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Removing elements in channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#separating-channel-items" class="md-nav__link">
    <span class="md-ellipsis">
      Separating channel items
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#separate-items-based-on-a-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Separate items based on a condition
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#combining-a-channel" class="md-nav__link">
    <span class="md-ellipsis">
      Combining a channel
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#count-items-with-a-common-value" class="md-nav__link">
    <span class="md-ellipsis">
      Count items with a common value
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/nextflow-io/nf-validation/edit/main/docs/samplesheets/examples.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="sample-sheet-channel-manipulation-examples">Sample sheet channel manipulation examples</h1>
<h2 id="introduction">Introduction</h2>
<p>Understanding channel structure and manipulation is critical for getting the most out of Nextflow. nf-validation helps initialise your channels from the text inputs to get you started, but further work might be required to fit your exact use case. In this page we run through some common cases for transforming the output of <code>.fromSamplesheet</code>.</p>
<h3 id="glossary">Glossary</h3>
<ul>
<li>A channel is the Nextflow object, referenced in the code</li>
<li>An item is each thing passing through the channel, equivalent to one row in the samplesheet</li>
<li>An element is each thing in the item, e.g., the meta value, fastq_1 etc. It may be a file or value</li>
</ul>
<h2 id="default-mode">Default mode</h2>
<p>Each item in the channel emitted by <code>.fromSamplesheet()</code> is a flat tuple, corresponding with each row of the samplesheet. Each item will be composed of a meta value (if present) and any additional elements from columns in the samplesheet, e.g.:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sample,fastq_1,fastq_2,bed
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>sample1,fastq1.R1.fq.gz,fastq1.R2.fq.gz,sample1.bed
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>sample2,fastq2.R1.fq.gz,fastq2.R2.fq.gz,
</code></pre></div>
<p>Might create a channel where each element consists of 4 items, a map value followed by three files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">// Columns:</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="o">[</span><span class="w"> </span><span class="n">val</span><span class="o">([</span><span class="w"> </span><span class="nl">sample:</span><span class="w"> </span><span class="n">sample</span><span class="w"> </span><span class="o">]),</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">fastq1</span><span class="o">),</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">fastq2</span><span class="o">),</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="n">bed</span><span class="o">)</span><span class="w"> </span><span class="o">]</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="c1">// Resulting in:</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="o">[</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nl">id:</span><span class="w"> </span><span class="s2">&quot;sample&quot;</span><span class="w"> </span><span class="o">],</span><span class="w"> </span><span class="n">fastq1</span><span class="o">.</span><span class="na">R1</span><span class="o">.</span><span class="na">fq</span><span class="o">.</span><span class="na">gz</span><span class="o">,</span><span class="w"> </span><span class="n">fastq1</span><span class="o">.</span><span class="na">R2</span><span class="o">.</span><span class="na">fq</span><span class="o">.</span><span class="na">gz</span><span class="o">,</span><span class="w"> </span><span class="n">sample1</span><span class="o">.</span><span class="na">bed</span><span class="o">]</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="o">[</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nl">id:</span><span class="w"> </span><span class="s2">&quot;sample2&quot;</span><span class="w"> </span><span class="o">],</span><span class="w"> </span><span class="n">fastq2</span><span class="o">.</span><span class="na">R1</span><span class="o">.</span><span class="na">fq</span><span class="o">.</span><span class="na">gz</span><span class="o">,</span><span class="w"> </span><span class="n">fastq2</span><span class="o">.</span><span class="na">R2</span><span class="o">.</span><span class="na">fq</span><span class="o">.</span><span class="na">gz</span><span class="o">,</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="c1">// A missing value from the samplesheet is an empty list</span>
</code></pre></div>
<p>This channel can be used as input of a process where the input declaration is:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>tuple val(meta), path(fastq_1), path(fastq_2), path(bed)
</code></pre></div>
<p>It may be necessary to manipulate this channel to fit your process inputs. For more documentation, check out the <a href="https://www.nextflow.io/docs/latest/operator.html">Nextflow operator docs</a>, however here are some common use cases with <code>.fromSamplesheet()</code>.</p>
<h2 id="using-a-samplesheet-with-no-headers">Using a samplesheet with no headers</h2>
<p>Sometimes you only have one possible input in the pipeline samplesheet. In this case it doesn't make sense to have a header in the samplesheet. This can be done by creating a samplesheet with an empty string as input key:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="w">  </span><span class="nt">&quot;$schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://json-schema.org/draft-07/schema&quot;</span><span class="p">,</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">  </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Schema for the file provided with params.input&quot;</span><span class="p">,</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;array&quot;</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">  </span><span class="nt">&quot;items&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;object&quot;</span><span class="p">,</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="w">      </span><span class="nt">&quot;&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;string&quot;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">      </span><span class="p">}</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="w">  </span><span class="p">}</span>
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a><span class="p">}</span>
</code></pre></div>
<p>When using samplesheets like this CSV file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>test_1
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>test_2
</code></pre></div>
<p>or this YAML file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_1</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">test_2</span>
</code></pre></div>
<p>The output of <code>.fromSamplesheet()</code> will look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">[</span>test_1<span class="o">]</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="o">[</span>test_2<span class="o">]</span>
</code></pre></div>
<h2 id="changing-the-structure-of-channel-items">Changing the structure of channel items</h2>
<p>Each item in the channel will be a flat tuple, but some processes will use multiple files as a list in their input channel, this is common in nf-core modules. For example, consider the following input declaration in a process, where FASTQ could be &gt; 1 file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>process ZCAT_FASTQS {
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>    input:
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>        tuple val(meta), path(fastq)
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    &quot;&quot;&quot;
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>    zcat $fastq
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a>    &quot;&quot;&quot;
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>}
</code></pre></div>
<p>The output of <code>.fromSamplesheet()</code> can be used by default with a process with the following input declaration:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>val(meta), path(fastq_1), path(fastq_2)
</code></pre></div>
<p>To manipulate each item within a channel, you should use the <a href="https://www.nextflow.io/docs/latest/operator.html#map">Nextflow <code>.map()</code> operator</a>. This will apply a function to each element of the channel in turn. Here, we convert the flat tuple into a tuple composed of a meta and a list of FASTQ files:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>Channel.fromSamplesheet(&quot;input&quot;)
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>    .map { meta, fastq_1, fastq_2 -&gt; tuple(meta, [ fastq_1, fastq_2 ]) }
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>    .set { input }
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>input.view() // Channel has 2 elements: meta, fastqs
</code></pre></div>
<p>This is now compatible with the process defined above and will not raise a warning about input cardinality:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>ZCAT_FASTQS(input)
</code></pre></div>
<h2 id="removing-elements-in-channel-items">Removing elements in channel items</h2>
<p>For example, to remove the BED file from the channel created above, we could not return it from the map. Note the absence of the <code>bed</code> item in the return of the closure below:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>Channel.fromSamplesheet(&quot;input&quot;)
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a>    .map { meta, fastq_1, fastq_2, bed -&gt; tuple(meta, fastq_1, fastq_2) }
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a>    .set { input }
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a>input.view() // Channel has 3 elements: meta, fastq_1, fastq_2
</code></pre></div>
<p>In this way you can drop items from a channel.</p>
<h2 id="separating-channel-items">Separating channel items</h2>
<p>We could perform this twice to create one channel containing the FASTQs and one containing the BED files, however Nextflow has a native operator to separate channels called <a href="https://www.nextflow.io/docs/latest/operator.html#multimap"><code>.multiMap()</code></a>. Here, we separate the FASTQs and BEDs into two separate channels using <code>multiMap</code>. Note, the channels are both contained in <code>input</code> and accessed as an attribute using dot notation:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>Channel.fromSamplesheet(&quot;input&quot;)
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a>    .multiMap { meta, fastq_1, fastq_2, bed -&gt;
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a>        fastq: tuple(meta, fastq_1, fastq_2)
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a>        bed:   tuple(meta, bed)
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a>    }
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a>    .set { input }
</code></pre></div>
<p>The channel has two attributes, <code>fastq</code> and <code>bed</code>, which can be accessed separately.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>input.fastq.view() // Channel has 3 elements: meta, fastq_1, fastq_2
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>input.bed.view()   // Channel has 2 elements: meta, bed
</code></pre></div>
<p>Importantly, <code>multiMap</code> applies to every item in the channel and returns an item to both channels for every input, i.e. <code>input</code>, <code>input.fastq</code> and <code>input.bed</code> all contain the same number of items, however each item will be different.</p>
<h2 id="separate-items-based-on-a-condition">Separate items based on a condition</h2>
<p>You can use the <a href="https://www.nextflow.io/docs/latest/operator.html#branch"><code>.branch()</code> operator</a> to separate the channel entries based on a condition. This is especially useful when you can get multiple types of input data.</p>
<p>This example shows a channel which can have entries for WES or WGS data. WES data includes a BED file denoting the target regions, but WGS data does not. These analysis are different so we want to separate the WES and WGS entries from each other. We can separate the two using <code>.branch</code> based on the presence of the BED file:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>// Channel with four elements - see docs for examples
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>params.input = &quot;samplesheet.csv&quot;
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>Channel.fromSamplesheet(&quot;input&quot;)
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>    .branch { meta, fastq_1, fastq_2, bed -&gt;
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>        // If BED does not exist
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>        WGS: !bed
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>            return [meta, fastq_1, fastq_2]
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a>        // If BED exists
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a>        WES: bed
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a>            // The original channel structure will be used when no return statement is used.
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a>    }
<a id="__codelineno-14-13" name="__codelineno-14-13" href="#__codelineno-14-13"></a>    .set { input }
<a id="__codelineno-14-14" name="__codelineno-14-14" href="#__codelineno-14-14"></a>
<a id="__codelineno-14-15" name="__codelineno-14-15" href="#__codelineno-14-15"></a>input.WGS.view() // Channel has 3 elements: meta, fastq_1, fastq_2
<a id="__codelineno-14-16" name="__codelineno-14-16" href="#__codelineno-14-16"></a>input.WES.view() // Channel has 4 elements: meta, fastq_1, fastq_2, bed
</code></pre></div>
<p>Unlike <code>multiMap</code>, the outputs of <code>.branch()</code>, the resulting channels will contain a different number of items.</p>
<h2 id="combining-a-channel">Combining a channel</h2>
<p>After splitting the channel, it may be necessary to rejoin the channel. There are many ways to join a channel, but here we will demonstrate the simplest which uses the <a href="https://www.nextflow.io/docs/latest/operator.html#join">Nextflow join operator</a> to rejoin any of the channels from above based on the first element in each item, the <code>meta</code> value.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>input.fastq.view() // Channel has 3 elements: meta, fastq_1, fastq_2
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>input.bed.view()   // Channel has 2 elements: meta, bed
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a>input.fastq
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>    .join( input.bed )
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>    .set { input_joined }
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>input_joined.view() // Channel has 4 elements: meta, fastq_1, fastq_2, bed
</code></pre></div>
<h2 id="count-items-with-a-common-value">Count items with a common value</h2>
<p>This example is based on this <a href="https://github.com/mribeirodantas/NextflowSnippets/blob/main/snippets/countBy.md">code</a> from <a href="https://github.com/mribeirodantas">Marcel Ribeiro-Dantas</a>.</p>
<p>It's useful to determine the count of channel entries with similar values when you want to merge them later on (to prevent pipeline bottlenecks with <code>.groupTuple()</code>).</p>
<p>This example contains a channel where multiple samples can be in the same family. Later on in the pipeline we want to merge the analyzed files so one file gets created for each family. The result will be a channel with an extra meta field containing the count of channel entries with the same family name.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a>// channel created by fromSamplesheet() previous to modification:
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>// [[id:example1, family:family1], example1.txt]
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>// [[id:example2, family:family1], example2.txt]
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a>// [[id:example3, family:family2], example3.txt]
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>
<a id="__codelineno-16-6" name="__codelineno-16-6" href="#__codelineno-16-6"></a>params.input = &quot;samplesheet.csv&quot;
<a id="__codelineno-16-7" name="__codelineno-16-7" href="#__codelineno-16-7"></a>
<a id="__codelineno-16-8" name="__codelineno-16-8" href="#__codelineno-16-8"></a>Channel.fromSamplesheet(&quot;input&quot;)
<a id="__codelineno-16-9" name="__codelineno-16-9" href="#__codelineno-16-9"></a>    .tap { ch_raw }                       // Create a copy of the original channel
<a id="__codelineno-16-10" name="__codelineno-16-10" href="#__codelineno-16-10"></a>    .map { meta, txt -&gt; [ meta.family ] } // Isolate the value to count on
<a id="__codelineno-16-11" name="__codelineno-16-11" href="#__codelineno-16-11"></a>    .reduce([:]) { counts, family -&gt;      // Creates a map like this: [family1:2, family2:1]
<a id="__codelineno-16-12" name="__codelineno-16-12" href="#__codelineno-16-12"></a>        counts[family] = (counts[family] ?: 0) + 1
<a id="__codelineno-16-13" name="__codelineno-16-13" href="#__codelineno-16-13"></a>        counts
<a id="__codelineno-16-14" name="__codelineno-16-14" href="#__codelineno-16-14"></a>    }
<a id="__codelineno-16-15" name="__codelineno-16-15" href="#__codelineno-16-15"></a>    .combine(ch_raw)                     // Add the count map to the original channel
<a id="__codelineno-16-16" name="__codelineno-16-16" href="#__codelineno-16-16"></a>    .map { counts, meta, txt -&gt;          // Add the counts of the current family to the meta
<a id="__codelineno-16-17" name="__codelineno-16-17" href="#__codelineno-16-17"></a>        new_meta = meta + [count:counts[meta.family]]
<a id="__codelineno-16-18" name="__codelineno-16-18" href="#__codelineno-16-18"></a>        [ new_meta, txt ]
<a id="__codelineno-16-19" name="__codelineno-16-19" href="#__codelineno-16-19"></a>    }
<a id="__codelineno-16-20" name="__codelineno-16-20" href="#__codelineno-16-20"></a>    .set { input }
<a id="__codelineno-16-21" name="__codelineno-16-21" href="#__codelineno-16-21"></a>
<a id="__codelineno-16-22" name="__codelineno-16-22" href="#__codelineno-16-22"></a>input.view()
<a id="__codelineno-16-23" name="__codelineno-16-23" href="#__codelineno-16-23"></a>// [[id:example1, family:family1, count:2], example1.txt]
<a id="__codelineno-16-24" name="__codelineno-16-24" href="#__codelineno-16-24"></a>// [[id:example2, family:family1, count:2], example2.txt]
<a id="__codelineno-16-25" name="__codelineno-16-25" href="#__codelineno-16-25"></a>// [[id:example3, family:family2, count:1], example3.txt]
</code></pre></div>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../fromSamplesheet/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Create a channel">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Create a channel
              </div>
            </div>
          </a>
        
        
          
          <a href="../../contributing/setup/" class="md-footer__link md-footer__link--next" aria-label="Next: Contribution instructions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Contribution instructions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.code.annotate", "content.code.copy", "navigation.instant", "navigation.top", "navigation.tracking", "navigation.sections", "navigation.footer", "search.share", "toc.follow"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.fe8b6f2b.min.js"></script>
      
    
  </body>
</html>